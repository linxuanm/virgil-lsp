class ResponseError(code: int, message: string, data: JsonSerializable) extends JsonSerializable {
	def serialize() -> JsonValue {
		var b = JsonBuilder.new().num("code", code).str("message", message);
		if (data != null) b.add("data", data.serialize());
		return b.build();
	}
}

type ResponseMessage {
	case Data(v: JsonSerializable);
	case Error(e: ResponseError);
}
